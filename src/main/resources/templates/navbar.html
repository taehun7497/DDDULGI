<nav th:fragment="navbarFragment" class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
    <div class="navbar bg-base-100">
        <div class="flex-1">
            <a href="/" class="btn btn-ghost text-xl">dulgiUI</a>
        </div>
        <div class="flex-none gap-2">
            <div class="form-control">
                <input type="text" id="searchInput" placeholder="Search" class="input input-bordered w-24 md:w-auto"/>
            </div>
            <div class="dropdown dropdown-end">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
                    <div class="w-10 rounded-full">
                        <img alt="Tailwind CSS Navbar component" class="w-40 border-4 border-white rounded-full"
                             th:src="${url != null ? url : '/1715046707.gif'}" loop="infinite"/>
                    </div>
                </div>
                <ul tabindex="0"
                    class="mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52">
                    <li class="nav-item">
                        <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/user/info}">프로필</a>
                    </li>
                    <li sec:authorize="isAnonymous()">
                        <a th:href="@{/user/login}">Login</a>
                    </li>
                    <li sec:authorize="isAuthenticated()">
                        <a th:href="@{/user/logout}">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<script>
    document.getElementById('searchInput').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            performSearch();
        }
    });

    function performSearch() {
        const query = document.getElementById('searchInput').value.toLowerCase();

        if (query === '공용 캘린더') {
            window.location.href = '/calendar/0';
        } else if (query === '자유게시판') {
            window.location.href = '/question/list/qna';
        } else if (query === '개인 캘린더') {
            window.location.href = '/calendar/${calendarId}';
        } else if (query === '프로필') {
            window.location.href = '/user/info';
        } else if (query === '채팅') {
            window.location.href = '/chat/list';
        } else {
            alert('No matching page found');
        }
    }
</script>